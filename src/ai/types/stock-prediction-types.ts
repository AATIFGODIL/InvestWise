
/**
 * @fileOverview Defines the TypeScript types and Zod schemas for the stock prediction flow.
 * Using Zod schemas ensures type safety and data validation throughout the AI agent's operations,
 * from user input to the final structured output.
 */

import { z } from 'zod';

/**
 * Schema for the input provided by the user to the main stock prediction flow.
 */
export const StockPredictionInputSchema = z.object({
  symbol: z.string().describe('The stock ticker symbol to predict, e.g., "AAPL".'),
});
export type StockPredictionInput = z.infer<typeof StockPredictionInputSchema>;


/**
 * Schema for the raw, unprocessed output received from the external prediction API tool.
 * This structure is what the API tool is expected to return.
 */
export const RawStockPredictionOutputSchema = z.object({
    symbol: z.string().describe('The stock symbol for which the prediction was made.'),
    forecast: z.array(z.number()).describe('An array of predicted prices for the next 5 months.'),
    accuracy: z.number().describe('A score from 0 to 1 indicating the model\'s accuracy.'),
});
export type RawStockPredictionOutput = z.infer<typeof RawStockPredictionOutputSchema>;


/**
 * Schema for the final, interpreted output that is sent back to the user interface.
 * This is the human-friendly result generated by the language model.
 */
export const StockPredictionOutputSchema = z.object({
  prediction: z.string().describe('The AI-generated, human-readable summary of the stock forecast.'),
  confidence: z.enum(["High", "Medium", "Low"]).describe('The confidence level of the prediction, derived from the model\'s accuracy.'),
});
export type StockPredictionOutput = z.infer<typeof StockPredictionOutputSchema>;
